{{ partial "header.html" . }}
    <article>
      <h1>Personal Work</h1>
      <div class="projects">
      {{ range $ind, $ele := .Params.projects }}
        <div class="project">
          <a href="{{ $ele.url }}" title="{{ $ele.title }}">
            <!-- 
                sample url 
                https://res.cloudinary.com/kevinnewcombe/image/upload/c_scale,f_auto,w_2110/v1580074421/flipnav_coan6z.jpg
            -->

            <img srcset="{{ range $i, $sequence :=  (seq 10) }} https://res.cloudinary.com/kevinnewcombe/image/upload/c_scale,f_auto,w_{{ add (mul $i 100) 300 }}/v1580074421/{{ $ele.img_src }}.jpg {{ add (mul $i 100) 300 }}w{{ if lt $i 9 }},{{end}}{{ end }}"src="images/projects/originals/{{ $ele.img_src }}.jpg" sizes="(min-width:768px) 50vw, 100vw" alt="{{ $ele.title }}" /></a>
           <h3><a href="{{ $ele.url }}" title="{{ $ele.title }}">{{ $ele.title }}</a></h3>
           <p>{{ $ele.technology }}</p>
        </div>
      {{ end }}
      </div><!-- /.projects -->
      <section>
        <h1>Other Work</h1>
        <p>
          <a href="https://www.skillshare.com/classes/Build-an-Explorable-3D-Scene-with-Three.js/1275426279">Build an Explorable 3D Scene with three.js on Skillshare</a><br />
          <a href="https://codepen.io/kevinnewcombe/post/visualizing-elevation-data-with-three-js">Visualizing elevation data with three.js on CodePen</a>
        </p>
      </section>

      <section>

        {{ $daily := getJSON "http://kn-port-endpoint.herokuapp.com/daily" }}
        <h1>About</h1>

        <p>Hi, my name's <em>Kevin Newcombe</em>.</p>
        <p>I'm a front-end developer who builds with, among other things: SCSS, Vue.js, three.js, Hugo, node.js and php (though not all the same time, obviously.)</p>
        <p>I'm currently based in <em>Edmonton, Canada</em>. The last book I read was <em><a href="{{ $daily.goodreads.link }}">{{ $daily.goodreads.title }}</a></em> by {{ $daily.goodreads.author }}. <span class="js-activity"></span></p>
     
      </article>
    </section>
 
    <script>
      const xhr = new XMLHttpRequest();
      xhr.open('GET', 'https://kn-port-endpoint.herokuapp.com/realtime');
      xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 400) {
          let data = JSON.parse(xhr.responseText);
          s = data.spotify;
          
          status = (s.currently_playing) ? "At this exact moment, I'm listening to" : "The last song I listened to on Spotify was"
          em = document.createElement('em');
          if(s.external_url){
            wrapper = document.createElement('a');
            wrapper.setAttribute('href', s.external_url);
          }else{
            wrapper = document.createElement('span');
          }
          em.appendChild(wrapper);
          wrapper.appendChild(document.createTextNode(s.track_name));
          document.querySelector('.js-activity').appendChild(document.createTextNode(status+' '));
          document.querySelector('.js-activity').appendChild(em);
          document.querySelector('.js-activity').appendChild(document.createTextNode(' by '+s.artist+'. '));
        }
      }
      xhr.send();
      console.log('no peeking')
  </script>
  
{{ partial "footer.html" . }}
